<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Job Count</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      padding: 20px;
    }
    .container {
      max-width: 400px;
      text-align: left;      /* keep UI left aligned */
      margin-left: 0;
    }
    h2 {
      font-weight: 300;      /* thin title */
      margin-bottom: 10px;
      font-size: 20px;
    }
    input {
      width: 100%;
      padding: 8px;
      margin: 6px 0;
      border: 1px solid #555;
      border-radius: 4px;
      background: #000;
      color: #fff;
      font-size: 14px;
    }
    input::placeholder {
      color: #888;
    }

    .result-box {
      margin-top: 15px;
      padding: 10px;
      border: 1px solid #555; /* thin border */
      background: #000;
      border-radius: 5px;
      font-size: 14px;
      white-space: pre-line;  /* preserve line breaks */
      cursor: pointer;        /* clickable */
      user-select: text;      /* allow text selection */
      transition: color 0.18s ease, box-shadow 0.18s ease;
      position: relative;
      color: #fff;
    }
    .result-box:hover { color: #4da6ff; } /* blue on hover */

    /* small transient message ("Copied", "Nothing to copy") */
    .copy-msg {
      position: absolute;
      top: 6px;
      right: 8px;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 4px;
      background: rgba(255,255,255,0.06);
      color: #bfffc9;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.15s ease;
    }
    .copy-msg.show { opacity: 1; }

  </style>
</head>
<body>
  <div class="container">
    <h2>JOB COUNT</h2>

    <input type="number" id="break1" placeholder="1st Break" oninput="calculate()">
    <input type="number" id="lunch"  placeholder="Lunch"   oninput="calculate()">
    <input type="number" id="break2" placeholder="2nd Break"oninput="calculate()">
    <input type="number" id="eos"    placeholder="EOS"     oninput="calculate()">

    <div class="result-box" id="resultBox" title="Click to copy">
      1st Break:  
      Lunch:  
      2nd Break:  
      EOS:  
      Total:  
      <div id="copyMsg" class="copy-msg" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    const resultBox = document.getElementById('resultBox');
    const copyMsg = document.getElementById('copyMsg');

    function calculate() {
      const b1 = parseInt(document.getElementById('break1').value) || 0;
      const l  = parseInt(document.getElementById('lunch').value)  || 0;
      const b2 = parseInt(document.getElementById('break2').value) || 0;
      const e  = parseInt(document.getElementById('eos').value)    || 0;

      const res1 = b1 > 0 ? b1 : "";
      const res2 = l  > 0 ? (l - b1) : "";
      const res3 = b2 > 0 ? (b2 - l) : "";
      const res4 = e  > 0 ? (e - b2) : "";

      const total = e > 0 ? e : (b2 > 0 ? b2 : (l > 0 ? l : (b1 || "")));

      let text =
`1st Break: ${res1}
Lunch: ${res2}
2nd Break: ${res3}
EOS: ${res4}
Total: ${total || ""}`;

      if (b1 > 0 && l > 0 && b2 > 0 && e > 0) {
        text += `

On time tagging, NO OB and NO over lunch
Complete Assets: No Damages & Without Privacy Screen`;
      }

      // update box text
      // keep copyMsg element inside, so set textContent for result area excluding copyMsg
      // We update the whole content except the copy message element
      // To preserve copyMsg element we set textContent then append copyMsg
      resultBox.textContent = text;
      resultBox.appendChild(copyMsg); // re-attach the small feedback element
    }

    // copy helper with fallback
    function copyToClipboard(text) {
      if (!text || !text.trim()) {
        showFeedback('Nothing to copy');
        return;
      }

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(() => {
          showFeedback('Copied');
        }).catch(() => {
          fallbackCopy(text);
        });
      } else {
        fallbackCopy(text);
      }
    }

    function fallbackCopy(text) {
      try {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        ta.setSelectionRange(0, ta.value.length);
        document.execCommand('copy');
        document.body.removeChild(ta);
        showFeedback('Copied');
      } catch (err) {
        showFeedback('Copy failed');
      }
    }

    // show a small ephemeral message inside result box
    let feedbackTimer = null;
    function showFeedback(msg) {
      clearTimeout(feedbackTimer);
      copyMsg.textContent = msg;
      copyMsg.classList.add('show');
      // hide after 1.2s
      feedbackTimer = setTimeout(() => {
        copyMsg.classList.remove('show');
      }, 1200);
    }

    // clicking the box copies the displayed text (excluding the feedback element)
    resultBox.addEventListener('click', (e) => {
      // gather the text content to copy (we don't want to include the copyMsg text when visible)
      // easiest: temporarily hide copyMsg, read textContent, then restore
      const wasVisible = copyMsg.classList.contains('show');
      copyMsg.classList.remove('show');
      const textToCopy = resultBox.textContent;
      if (wasVisible) copyMsg.classList.add('show');
      copyToClipboard(textToCopy);
    });

    // initial render
    calculate();
  </script>
</body>
</html>
